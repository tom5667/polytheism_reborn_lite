#Patron deity decision from vanilla game, override: removed needing the personal deity doctrine 
select_personal_deity_germanic_decision = {
	picture = "gfx/interface/illustrations/decisions/fp1_decisons_hold_bolt.dds"

	desc = select_personal_deity_germanic_decision_desc
	selection_tooltip = select_personal_deity_germanic_decision_tooltip

	is_shown = {
		# DLC check.
		has_fp1_dlc_trigger = yes
		# Following a valid religion & faith.
		religion = religion:germanic_religion
	}

	is_valid = {
	}

	is_valid_showing_failures_only = {
		# Have to at _least_ not be in piety debt.
		piety >= 0
	}

	cooldown = { years = 2 }

	effect = {
		if={
			limit={
				OR = {
					faith = faith:norse_pagan
					faith = { has_doctrine_parameter = special_doctrine_norse_patron_god_active }
				}
			}
			# Show the possible options.
			show_as_tooltip = {
				random_list = {
					desc = select_personal_deity_germanic_decision_tt
					100 = {
						show_chance = no
						desc = select_personal_deity_germanic_decision.select_odin
						add_character_modifier = bhakti_germanic_generic_odin
					}
					100 = {
						trigger = { is_vaguely_danish_bhakti_trigger = no }
						show_chance = no
						desc = select_personal_deity_germanic_decision.select_ullr
						add_character_modifier = bhakti_germanic_not_danish_ullr
					}
					100 = {
						trigger = { is_vaguely_danish_bhakti_trigger = yes }
						show_chance = no
						desc = select_personal_deity_germanic_decision.select_tyr
						add_character_modifier = bhakti_germanic_danish_tyr
					}
					100 = {
						show_chance = no
						desc = select_personal_deity_germanic_decision.select_thor
						add_character_modifier = bhakti_germanic_generic_thor
					}
					100 = {
						show_chance = no
						desc = select_personal_deity_germanic_decision.select_freyr
						add_character_modifier = bhakti_germanic_generic_freyr
					}
				}
			}
		# And the actual effect.
		trigger_event = religious_decision.0102
		}
		else_if ={
			limit={
				OR = {
					faith = faith:anglo_saxon_polytheism
					faith = { has_doctrine_parameter = special_doctrine_anglo_saxon_patron_god_active }

				}
				
			}
				# Show the possible options.
				show_as_tooltip = {
					random_list = {
						desc = select_personal_deity_germanic_decision_tt
						100 = {
							show_chance = no
							desc = select_personal_deity_germanic_decision.select_woden
							add_character_modifier = anglo_saxon_woden
						}
						100 = {
							show_chance = no
							desc = select_personal_deity_germanic_decision.select_fri
							add_character_modifier = anglo_saxon_fri
						}
						100 = {
							show_chance = no
							desc = select_personal_deity_germanic_decision.select_njord
							add_character_modifier = anglo_saxon_njord
						}
						100 = {
							show_chance = no
							desc = select_personal_deity_germanic_decision.select_tiwaz
							add_character_modifier = anglo_saxon_tiwaz
						}
						100 = {
							show_chance = no
							desc = select_personal_deity_germanic_decision.select_seaxneat
							add_character_modifier = anglo_saxon_seaxneat
						}
					}
				}
			trigger_event = ascmd.001
		}
		else_if ={
			limit = {
				faith = faith:german_polytheism
				faith = { has_doctrine_parameter = special_doctrine_german_patron_god_active }

			}
							# Show the possible options.
							show_as_tooltip = {
								random_list = {
									desc = select_personal_deity_germanic_decision_tt
									100 = {
										show_chance = no
										desc = select_personal_deity_germanic_decision.select_wotan
										add_character_modifier = german_wotan
										}
									100 = {
										show_chance = no
										desc = select_personal_deity_germanic_decision.select_freyr
										add_character_modifier = german_freyr
									}
									100 = {
										show_chance = no
										desc = select_personal_deity_germanic_decision.select_njordr
										add_character_modifier = german_njordr
									}
									100 = {
										show_chance = no
										desc = select_personal_deity_germanic_decision.select_nornir
										add_character_modifier = german_nornir
									}
									100 = {
										show_chance = no
										desc = select_personal_deity_germanic_decision.select_mimir
										add_character_modifier = german_mimir
									}
								}
							}
			trigger_event = ascmd.002
		}

	}

	ai_check_interval = 96
	
	ai_potential = {
		piety >= minor_piety_value
		NOR = {
			has_character_modifier = bhakti_germanic_generic_odin
			has_character_modifier = bhakti_germanic_not_danish_ullr
			has_character_modifier = bhakti_germanic_danish_tyr
			has_character_modifier = bhakti_germanic_generic_thor
			has_character_modifier = bhakti_germanic_generic_freyr
			has_character_modifier = anglo_saxon_woden
			has_character_modifier = anglo_saxon_fri
			has_character_modifier = anglo_saxon_njord
			has_character_modifier = anglo_saxon_tiwaz
			has_character_modifier = anglo_saxon_seaxneat
			has_character_modifier = german_freyr
			has_character_modifier = german_njordr
			has_character_modifier = german_nornir
			has_character_modifier = german_mimir

		}
	}

	ai_will_do = {
		base = 100
	}
}

#Updated Grand Sacrifice
hold_gruesome_festival_decision = {
	title = {
		first_valid = {
			triggered_desc = {
				trigger = { religion = religion:germanic_religion }
				desc = hold_gruesome_festival_decision_blot_name
			}
			desc = hold_gruesome_festival_decision_fallback_name
		}
	}
	picture = "gfx/interface/illustrations/decisions/fp1_decisons_hold_bolt.dds"
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						faith = { has_doctrine_parameter = gruesome_festivals_active }
						faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
					}
				}
				desc = hold_gruesome_festival_decision_desc.gf_humsac_practitioner
			}
			desc = hold_gruesome_festival_decision_desc.non_gf_practioner
		}
	}
	selection_tooltip = hold_gruesome_festival_decision_tooltip
	cooldown = { years = hold_gruesome_festival_decision_value }
	major = yes
	
	sort_order = 80

	is_shown = {
		# DLC check.
		has_fp1_dlc_trigger = yes
		# Following a valid faith, or simply has an appropriate county.
		OR = {
			faith = { has_doctrine_parameter = gruesome_festivals_active }
			faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
			# Early-out for people who couldn't take the decision anyway.
			AND = {
				highest_held_title_tier >= tier_duchy
				any_sub_realm_county = {
					count >= 1
					OR = {
						faith = { has_doctrine_parameter = gruesome_festivals_active }
						faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
					}
				}
			}
		}
	}

	is_valid = {
		# Must have at least some peasants who are into the idea.
		any_sub_realm_county = {
			OR = {
				faith = { has_doctrine_parameter = gruesome_festivals_active }
				faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
			}
			
		}
		# Suitable rank required.
		trigger_if = {
			limit = {
				OR = {
					faith = { has_doctrine_parameter = gruesome_festivals_active }
					faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
				}
			}
			OR = {
				is_independent_ruler = yes
				highest_held_title_tier >= tier_kingdom
			}
		}
		trigger_else = {
			highest_held_title_tier >= tier_duchy
			# Technically, we could make this just mega-stressful, but since you'd have no easy way out, that feels like a newb trap.
			NOT = { has_trait = zealous }
		}
	}

	is_valid_showing_failures_only = {
		# Generic can-continue check.
		gruesome_sacrifices_grand_blot_can_continue_trigger = yes
	}

	should_create_alert = { #This means that if the player is tracking the decision, it won't make an alert unless these additional conditions are fulfilled
		gold >= 50 
	}

	effect = {
		custom_tooltip = hold_gruesome_festival_decision_tt
		save_scope_as = blotter
		# Path A: you're one of the faithful yourself.
		if = {
			limit = {
				OR = {
					faith = { has_doctrine_parameter = gruesome_festivals_active }
					faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
				}
			}
			custom_tooltip = hold_gruesome_festival_decision_tt.piety_gain
			trigger_event = fp1_other_decisions.0001
		}
		# Path B: you merely rule over them.
		else = {
			custom_tooltip = hold_gruesome_festival_decision_tt.piety_lose
			trigger_event = fp1_other_decisions.0004
		}
	}

	cost = { prestige = gruesome_festival_prestige_cost_value }

	ai_check_interval = 60
	
	ai_potential = {
		# Has enough gold for the smallest variant.
		short_term_gold >= medium_gold_value
		# Is either of a practicing faith, or has a huge percentage of such followers.
		OR = {
			faith = { has_doctrine_parameter = gruesome_festivals_active }
			faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
			any_sub_realm_county = {
				percent >= 0.35
				OR = {
					faith = { has_doctrine_parameter = gruesome_festivals_active }
					faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
				}
			}
		}
	}

	ai_will_do = {
		base = 100
		
		# Different Faith Block
		## If not of the faith, you don't want to do it at all outside of extenuating circumstances.
		modifier = {
			add = -100
			NOT = {
				OR = {
					faith = { has_doctrine_parameter = gruesome_festivals_active }
					faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
				}
			}
		}
		## No need to account for zealots, as they cannae take the decision.
		## Cynical.
		modifier = {
			add = 10
			NOT = {
				OR = {
					faith = { has_doctrine_parameter = gruesome_festivals_active }
					faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
				}
			}
			has_trait = cynical
		}
		## Otherwise, we only want to do it if basically the whole realm is of some kind of gf-practicing faith.
		modifier = {
			add = 25
			NOT = {
				OR = {
					faith = { has_doctrine_parameter = gruesome_festivals_active }
					faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
				}
			}
			any_sub_realm_county = {
				percent >= 0.75
				OR = {
					faith = { has_doctrine_parameter = gruesome_festivals_active }
					faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
				}
			}
		}
		# Same Faith Block
		# Zealous.
		modifier = {
			add = 100
			OR = {
				faith = { has_doctrine_parameter = gruesome_festivals_active }
				faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
			}
			has_trait = zealous
		}
		# Cynical.
		modifier = {
			add = -25
			OR = {
				faith = { has_doctrine_parameter = gruesome_festivals_active }
				faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
			}
			has_trait = cynical
		}
		# You're richer.
		modifier = {
			add = 50
			OR = {
				faith = { has_doctrine_parameter = gruesome_festivals_active }
				faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
			}
			short_term_gold >= massive_gold_value
		}
		modifier = {
			add = 50
			OR = {
				faith = { has_doctrine_parameter = gruesome_festivals_active }
				faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
			}
			short_term_gold >= monumental_gold_value
		}
	}
}
#Credits to Cybrkxhan
#Not needed anymore as it's now an activity 
#Updated to also work with Romano Germanic
# RICE_misc_sacrifice_horses = {
# 	picture = "gfx/interface/illustrations/decisions/decision_RICE_horse_spirit.dds"

# 	ai_check_interval = 48

# 	cooldown = { days = 1825 } #3650 1825
	
# 	desc = RICE_misc_sacrifice_horses_desc
	
# 	is_shown = {
# 		highest_held_title_tier > tier_barony
# 		is_landed = yes
# 		OR = {
# 			religion = religion:tengrism_religion
# 			religion = religion:germanic_religion
# 			religion = religion:magyar_religion
# 			religion = religion:mordvin_religion		
# 			religion = religion:mari_religion		
# 			religion = religion:permic_religion		
# 			OR = {
# 				religion = religion:celtic_religion
# 				faith = { has_doctrine_parameter = special_doctrine_roman_patron_god_active }
# 				faith = { has_doctrine_parameter = special_doctrine_ecumenical_celtic_roman }
# 				faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
# 			}
# 		}
# 		AND = {
# 			has_global_variable = RICE_is_loaded
# 		}
# 	}
	
# 	is_valid = {
# 		OR = {
# 			religion = religion:tengrism_religion
# 			religion = religion:germanic_religion
# 			religion = religion:magyar_religion
# 			religion = religion:mordvin_religion		
# 			religion = religion:mari_religion		
# 			religion = religion:permic_religion		
# 			#Polytheism Reborn
# 			religion = religion:celtic_religion
# 			faith = { has_doctrine_parameter = special_doctrine_roman_patron_god_active }
# 			faith = { has_doctrine_parameter = special_doctrine_ecumenical_celtic_roman }
# 			faith = { has_doctrine_parameter = special_doctrine_ecumenical_germanic_roman }
# 		}
# 	}
	
# 	is_valid_showing_failures_only = {
# 		is_available_adult = yes
# 	}

#     widget = {
#     	gui = "decision_view_widget_RICE_misc_sacrifice_horses"
# 		controller = decision_option_list_controller
    	
# 		decision_has_second_step = yes
# 		decision_custom_widget_container = "custom_widgets_container_step_two"
# 		decision_to_second_step_button = "RICE_misc_sacrifice_horses_type" 

# 		# Minor
# 		item = {
# 			value = RICE_misc_horse_sacrifice_minor_option
# 			is_valid = {
# 				gold >= RICE_misc_horse_sacrifice_cost_minor
# 				is_ai = no # AI is apparently too dumb to properly pick something
# 			}
# 			current_description = RICE_misc_horse_sacrifice_minor_option_desc
# 			localization = RICE_misc_horse_sacrifice_minor_option
# 			icon = "gfx/interface/icons/widgets/RICE_misc_horse_sacrifice_minor.dds"

# 			ai_chance = {
# 				value = 10
# 			}
# 		}

# 		# Major
# 		item = {
# 			value = RICE_misc_horse_sacrifice_major_option
# 			is_valid = {
# 				gold >= RICE_misc_horse_sacrifice_cost_major
# 				is_ai = no # AI is apparently too dumb to properly pick something
# 			}
# 			current_description = RICE_misc_horse_sacrifice_major_option_desc
# 			localization = RICE_misc_horse_sacrifice_major_option
# 			icon = "gfx/interface/icons/widgets/RICE_misc_horse_sacrifice_major.dds"

# 			ai_chance = {
# 				value = 10
# 			}
# 		}

# 		# Great
# 		item = {
# 			value = RICE_misc_horse_sacrifice_great_option
# 			is_valid = {
# 				gold >= RICE_misc_horse_sacrifice_cost_great
# 				is_ai = no # AI is apparently too dumb to properly pick something
# 			}
# 			current_description = RICE_misc_horse_sacrifice_great_option_desc
# 			localization = RICE_misc_horse_sacrifice_great_option
# 			icon = "gfx/interface/icons/widgets/RICE_misc_horse_sacrifice_great.dds"

# 			ai_chance = {
# 				value = 10
# 			}
# 		}

# 		# AI option
# 		item = {
# 			value = RICE_misc_horse_sacrifice_ai_option
# 			is_shown = {
# 				OR = {
# 					is_ai = yes # AI picker
# 					debug_only = yes
# 				}
# 			}
# 			current_description = RICE_misc_horse_sacrifice_ai_option_desc
# 			localization = RICE_misc_horse_sacrifice_ai_option
# 			icon = "gfx/interface/icons/widgets/RICE_misc_horse_sacrifice_great.dds"

# 			ai_chance = {
# 				value = 20
# 			}
# 		}

# 	}

# 	effect = {

# 		custom_tooltip = RICE_misc_sacrifice_horses_effect_tooltip_1
# 		#custom_tooltip = RICE_misc_sacrifice_horses_effect_tooltip_2
# 		if = {
# 			limit = {
# 				has_game_rule = RICE_historical_context_on
# 			}
# 			custom_tooltip = RICE_misc_sacrifice_horses_context_tooltip
# 		}

# 		if = { # AI
# 			limit = { scope:RICE_misc_horse_sacrifice_ai_option = yes }
# 			random_list = {
# 				40 = {
# 					set_variable = {
# 						name = RICE_horse_sacrifice_type
# 						value = flag:minor
# 					}				
# 				}
# 				40 = {
# 					trigger = {
# 						gold >= RICE_misc_horse_sacrifice_cost_major
# 					}
# 					set_variable = {
# 						name = RICE_horse_sacrifice_type
# 						value = flag:major
# 					}
# 				}
# 				20 = {
# 					trigger = {
# 						gold >= RICE_misc_horse_sacrifice_cost_great
# 					}
# 					set_variable = {
# 						name = RICE_horse_sacrifice_type
# 						value = flag:great
# 					}
# 				}
# 			}
# 		}
# 		else_if = { # Honey
# 			limit = { scope:RICE_misc_horse_sacrifice_minor_option = yes }
# 			set_variable = {
# 				name = RICE_horse_sacrifice_type
# 				value = flag:minor
# 			}
# 		}
# 		else_if = { # Beeswax
# 			limit = { scope:RICE_misc_horse_sacrifice_major_option = yes }
# 			set_variable = {
# 				name = RICE_horse_sacrifice_type
# 				value = flag:major
# 			}
# 		}
# 		else_if = { # Honey and Beeswax
# 			limit = { scope:RICE_misc_horse_sacrifice_great_option = yes }
# 			set_variable = {
# 				name = RICE_horse_sacrifice_type
# 				value = flag:great
# 			}
# 		}



# 		trigger_event = {
# 			id = mordvin.0010
# 		}
# 	}

# 	minimum_cost = {
# 		gold = 50
# 	}
	
# 	ai_potential = {
# 		short_term_gold > 75
# 	}

# 	ai_will_do = {
# 		base = 25
# 		modifier = {
# 			add = 10
# 			has_trait = ambitious
# 		}
# 		modifier = {
# 			add = 10
# 			has_trait = zealous
# 		}
# 		modifier = {
# 			add = -10
# 			has_trait = cynical
# 		}
# 		modifier = {
# 			add = -10
# 			has_trait = lazy
# 		}
# 	}
# }